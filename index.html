<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlanQC</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <div class="login-header">
                <svg class="login-logo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                </svg>
                <h1>PlanQC</h1>
                <p>Weekly QC Planning Tool</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <div class="login-error" id="loginError"></div>
                <button type="submit" class="btn-primary login-btn" id="loginBtn">
                    <span>Sign In</span>
                </button>
            </form>
            <div class="login-divider">
                <span>or</span>
            </div>
            <button type="button" class="btn-secondary register-btn" id="registerBtn">
                Create New Account
            </button>
            <div class="login-footer">
                <p>Secure login powered by Firebase</p>
            </div>
        </div>
    </div>

    <!-- Main App Container (hidden until logged in) -->
    <div class="app-container" id="appContainer" style="display: none;">
        <header class="app-header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                </svg>
                <h1>PlanQC</h1>
            </div>
            <div class="week-navigation">
                <button class="nav-btn" id="prevWeekBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <span class="current-week" id="currentWeekDisplay">Week of Dec 2, 2024</span>
                <button class="nav-btn" id="nextWeekBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
            <!-- Search Box -->
            <div class="search-box">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                </svg>
                <input type="text" id="ticketSearch" placeholder="Search tickets..." autocomplete="off">
                <button class="search-clear" id="clearSearch" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <!-- Import Button -->
            <button class="data-btn import-btn" id="openImportModal" title="Import Tickets from Excel">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                </svg>
                Import Excel
            </button>
            
            <!-- Export Button -->
            <button class="data-btn" id="exportDataBtn" title="Export All Data to Excel">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                </svg>
                Export Excel
            </button>
            
            <button class="report-btn" id="openReportModal">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                    <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                </svg>
                Generate Report
            </button>
            <div class="user-info">
                <span class="user-email" id="userEmail"></span>
                <button class="logout-btn" id="logoutBtn" title="Sign Out">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </div>
        </header>

        <main class="main-content">
            <!-- Ticket Pool Section -->
            <section class="ticket-pool-section" id="ticketPoolSection">
                <div class="pool-header">
                    <div class="pool-title">
                        <span class="pool-icon">üì¶</span>
                        <h2>Ticket Pool</h2>
                        <span class="pool-count" id="poolTicketCount">0 tickets</span>
                    </div>
                    <div class="pool-actions">
                        <button class="pool-toggle-btn" id="togglePoolBtn" title="Toggle Ticket Pool">
                            <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="pool-content" id="poolContent">
                    <div class="pool-toolbar">
                        <div class="pool-search">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="M21 21l-4.35-4.35"/>
                            </svg>
                            <input type="text" id="poolSearchInput" placeholder="Search tickets...">
                        </div>
                        <div class="pool-selection-actions" id="poolSelectionActions" style="display: none;">
                            <span class="selected-count" id="selectedPoolCount">0 selected</span>
                            <button class="pool-action-btn" id="assignToCurrentWeek" title="Add to Current Week">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                                Current Week
                            </button>
                            <button class="pool-action-btn" id="assignToNextWeek" title="Add to Next Week">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                                Next Week
                            </button>
                            <button class="pool-action-btn danger" id="deleteFromPool" title="Delete Selected">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                </svg>
                                Delete
                            </button>
                        </div>
                        <div class="pool-bulk-select">
                            <label class="checkbox-label">
                                <input type="checkbox" id="selectAllPool">
                                <span>Select All</span>
                            </label>
                        </div>
                    </div>
                    <div class="pool-tickets" id="poolTickets">
                        <div class="pool-empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
                                <path d="M3.27 6.96L12 12.01l8.73-5.05M12 22.08V12"/>
                            </svg>
                            <p>No tickets in pool</p>
                            <span>Import tickets from Excel to add them here</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bleed Over Section (Top) -->
            <div class="bleed-over-section bleed-over-top" id="bleedOverSectionTop">
                <div class="bleed-over-content">
                    <div class="bleed-over-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 5l7 7-7 7M5 12h14"/>
                        </svg>
                    </div>
                    <div class="bleed-over-info">
                        <h3>Incomplete Tasks Detected</h3>
                        <p><span id="bleedOverCountTop">0</span> tasks with <span id="bleedOverHoursTop">0</span> remaining hours</p>
                    </div>
                    <button class="bleed-over-btn" id="bleedOverBtnTop">
                        <span>Transfer to Next Week</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Current Week Section -->
            <section class="week-section next-week current-week-section">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">üéØ</span>
                        <h2>Current Week</h2>
                        <span class="week-date" id="nextWeekDate">Dec 2 - Dec 8</span>
                        <span class="current-week-badge">This Week</span>
                    </div>
                    <button class="add-ticket-btn-header" data-week="next">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Add Ticket/Task
                    </button>
                    <div class="section-stats">
                        <div class="stat">
                            <span class="stat-value" id="nextTotalTickets">0</span>
                            <span class="stat-label">Tickets</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="nextTotalHours">0h</span>
                            <span class="stat-label">Planned</span>
                        </div>
                        <div class="stat unplanned">
                            <span class="stat-value" id="nextUnplannedHours">0h</span>
                            <span class="stat-label">Unplanned</span>
                        </div>
                        <div class="stat carried">
                            <span class="stat-value" id="nextCarriedHours">0h</span>
                            <span class="stat-label">Carried</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tester Capacity -->
                <div class="tester-capacity-inline collapsed" id="currentWeekCapacity">
                    <div class="capacity-inline-header" id="toggleCurrentCapacity">
                        <span class="capacity-inline-icon">üë•</span>
                        <span class="capacity-inline-title">Tester Capacity</span>
                        <svg class="capacity-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div class="capacity-inline-content">
                        <table class="tester-capacity-table">
                            <thead>
                                <tr>
                                    <th>Tester Name</th>
                                    <th>Total Hours</th>
                                    <th>Planned Hours</th>
                                    <th class="sortable-header" data-week="current" data-sort="unplanned">
                                        Unplanned
                                        <span class="sort-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M7 10l5-5 5 5M7 14l5 5 5-5"/>
                                            </svg>
                                        </span>
                                    </th>
                                    <th>Capacity</th>
                                </tr>
                            </thead>
                            <tbody id="currentWeekCapacityTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="group-by-controls">
                    <label>Group by:</label>
                    <div class="group-btn-container">
                        <button class="group-btn active" data-group="none" data-week="current">None</button>
                        <button class="group-btn" data-group="status" data-week="current">Status</button>
                        <button class="group-btn" data-group="category" data-week="current">Responsibility</button>
                        <button class="group-btn" data-group="tester" data-week="current">Tester</button>
                        <button class="group-btn" data-group="priority" data-week="current">Priority</button>
                    </div>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="cards" data-week="current" title="Card View">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                                <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
                            </svg>
                        </button>
                        <button class="view-btn" data-view="swimlanes" data-week="current" title="Swim Lanes">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="5" height="18"/><rect x="10" y="3" width="5" height="18"/>
                                <rect x="17" y="3" width="5" height="18"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="tickets-container" id="nextWeekTickets">
                    <!-- Tickets will be rendered here -->
                </div>
                
                <!-- Reestimation Notes -->
                <div class="reestimation-notes-section" id="currentWeekReestimationNotes">
                    <!-- Reestimation notes will be rendered here -->
                </div>
            </section>

            <!-- Next Week Section -->
            <section class="week-section next-week-plan">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">üìã</span>
                        <h2>Next Week</h2>
                        <span class="week-date" id="nextWeekPlanDate">Dec 9 - Dec 15</span>
                    </div>
                    <button class="add-ticket-btn-header" data-week="nextWeekPlan">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Add Ticket/Task
                    </button>
                    <div class="section-stats">
                        <div class="stat">
                            <span class="stat-value" id="nextWeekPlanTickets">0</span>
                            <span class="stat-label">Tickets</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="nextWeekPlanHours">0h</span>
                            <span class="stat-label">Planned</span>
                        </div>
                        <div class="stat unplanned">
                            <span class="stat-value" id="nextWeekPlanUnplannedHours">0h</span>
                            <span class="stat-label">Unplanned</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tester Capacity -->
                <div class="tester-capacity-inline collapsed" id="nextWeekCapacity">
                    <div class="capacity-inline-header" id="toggleNextCapacity">
                        <span class="capacity-inline-icon">üë•</span>
                        <span class="capacity-inline-title">Tester Capacity</span>
                        <svg class="capacity-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div class="capacity-inline-content">
                        <table class="tester-capacity-table">
                            <thead>
                                <tr>
                                    <th>Tester Name</th>
                                    <th>Total Hours</th>
                                    <th>Planned Hours</th>
                                    <th class="sortable-header" data-week="nextWeekPlan" data-sort="unplanned">
                                        Unplanned
                                        <span class="sort-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M7 10l5-5 5 5M7 14l5 5 5-5"/>
                                            </svg>
                                        </span>
                                    </th>
                                    <th>Capacity</th>
                                </tr>
                            </thead>
                            <tbody id="nextWeekCapacityTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="group-by-controls">
                    <label>Group by:</label>
                    <div class="group-btn-container">
                        <button class="group-btn active" data-group="none" data-week="nextWeekPlan">None</button>
                        <button class="group-btn" data-group="status" data-week="nextWeekPlan">Status</button>
                        <button class="group-btn" data-group="category" data-week="nextWeekPlan">Responsibility</button>
                        <button class="group-btn" data-group="tester" data-week="nextWeekPlan">Tester</button>
                        <button class="group-btn" data-group="priority" data-week="nextWeekPlan">Priority</button>
                    </div>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="cards" data-week="nextWeekPlan" title="Card View">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                                <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
                            </svg>
                        </button>
                        <button class="view-btn" data-view="swimlanes" data-week="nextWeekPlan" title="Swim Lanes">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="5" height="18"/><rect x="10" y="3" width="5" height="18"/>
                                <rect x="17" y="3" width="5" height="18"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="tickets-container" id="nextWeekPlanTicketsContainer">
                    <!-- Tickets will be rendered here -->
                </div>
                
                <!-- Reestimation Notes -->
                <div class="reestimation-notes-section" id="nextWeekReestimationNotes">
                    <!-- Reestimation notes will be rendered here -->
                </div>
            </section>

            </main>
    </div>

    <!-- Add/Edit Ticket Modal -->
    <div class="modal-overlay" id="ticketModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Ticket/Task</h3>
                <button class="modal-close" id="closeModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <form id="ticketForm">
                <div class="form-group">
                    <label for="ticketId">Ticket ID</label>
                    <input type="text" id="ticketId" placeholder="e.g., TICK-1234" required>
                </div>
                <div class="form-group">
                    <label for="ticketName">Ticket Name</label>
                    <input type="text" id="ticketName" placeholder="Brief description of the ticket" required>
                </div>
                <div class="form-group">
                    <label for="testerName">Tester Name</label>
                    <select id="testerName" required>
                        <option value="">Select Tester</option>
                        <option value="Amalraj R">Amalraj R</option>
                        <option value="Aravind K V">Aravind K V</option>
                        <option value="Julie Varghese">Julie Varghese</option>
                        <option value="Kavyagayathry S">Kavyagayathry S</option>
                        <option value="Reshma Madhavan Nair">Reshma Madhavan Nair</option>
                        <option value="Reshma R">Reshma R</option>
                        <option value="Subhash S V Nair">Subhash S V Nair</option>
                        <option value="Suby Baby">Suby Baby</option>
                        <option value="Vincy JP">Vincy JP</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="estimatedHours">Estimated Hours</label>
                        <input type="number" id="estimatedHours" min="0.5" step="0.5" placeholder="0" required>
                    </div>
                    <div class="form-group">
                        <label for="actualHours">Actual Hours</label>
                        <input type="number" id="actualHours" min="0" step="0.5" placeholder="0" value="0">
                    </div>
                </div>
                <div class="form-group">
                    <label for="ticketStatus">Status</label>
                    <select id="ticketStatus">
                        <option value="nil">Nil</option>
                        <option value="in-progress">In Progress</option>
                        <option value="start-code-review">Start Code Review</option>
                        <option value="qc-testing">QC Testing</option>
                        <option value="qc-testing-in-progress">QC Testing In Progress</option>
                        <option value="qc-testing-hold">QC Testing Hold</option>
                        <option value="qc-review-fail">QC Review Fail</option>
                        <option value="code-review-failed">Code Review Failed</option>
                        <option value="testing-in-progress">Testing In Progress</option>
                        <option value="tested-awaiting-fixes">Tested - Awaiting Fixes</option>
                        <option value="hold-pending">Hold/Pending</option>
                        <option value="bis-testing">BIS Testing</option>
                        <option value="approved-for-live">Approved for Live</option>
                        <option value="moved-to-live">Moved to Live</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ticketPriority">Priority</label>
                    <select id="ticketPriority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                        <option value="critical">Critical</option>
                    </select>
                </div>
                <input type="hidden" id="ticketWeek">
                <input type="hidden" id="editTicketIndex">
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal confirm-modal">
            <div class="confirm-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 5l7 7-7 7M5 12h14"/>
                </svg>
            </div>
            <h3>Transfer Incomplete Tasks?</h3>
            <p id="confirmMessage">This will carry over remaining hours from incomplete tasks to next week's plan.</p>
            <div class="confirm-details" id="confirmDetails">
                <!-- Details will be populated dynamically -->
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelConfirm">Cancel</button>
                <button type="button" class="btn-primary" id="confirmTransfer">Confirm Transfer</button>
            </div>
        </div>
    </div>

    <!-- Report Generation Modal -->
    <div class="modal-overlay" id="reportModal">
        <div class="modal report-modal">
            <div class="modal-header">
                <h3>Generate Report</h3>
                <button class="modal-close" id="closeReportModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="report-form">
                <div class="form-group">
                    <label>Time Range</label>
                    <div class="time-range-inputs">
                        <div class="time-range-field">
                            <label for="reportNumber">Past</label>
                            <input type="number" id="reportNumber" min="1" max="52" value="1">
                        </div>
                        <div class="time-range-field">
                            <label for="reportPeriod">Period</label>
                            <select id="reportPeriod">
                                <option value="week">Week(s)</option>
                                <option value="month">Month(s)</option>
                                <option value="year">Year(s)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Filter by Tester (Optional)</label>
                    <select id="reportTester">
                        <option value="">All Testers</option>
                        <option value="Amalraj R">Amalraj R</option>
                        <option value="Aravind K V">Aravind K V</option>
                        <option value="Julie Varghese">Julie Varghese</option>
                        <option value="Kavyagayathry S">Kavyagayathry S</option>
                        <option value="Reshma Madhavan Nair">Reshma Madhavan Nair</option>
                        <option value="Reshma R">Reshma R</option>
                        <option value="Subhash S V Nair">Subhash S V Nair</option>
                        <option value="Suby Baby">Suby Baby</option>
                        <option value="Vincy JP">Vincy JP</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Filter by Status (Optional)</label>
                    <select id="reportStatus">
                        <option value="">All Statuses</option>
                        <option value="nil">Nil</option>
                        <option value="in-progress">In Progress</option>
                        <option value="start-code-review">Start Code Review</option>
                        <option value="qc-testing">QC Testing</option>
                        <option value="qc-testing-in-progress">QC Testing In Progress</option>
                        <option value="qc-testing-hold">QC Testing Hold</option>
                        <option value="qc-review-fail">QC Review Fail</option>
                        <option value="code-review-failed">Code Review Failed</option>
                        <option value="testing-in-progress">Testing In Progress</option>
                        <option value="tested-awaiting-fixes">Tested - Awaiting Fixes</option>
                        <option value="hold-pending">Hold/Pending</option>
                        <option value="bis-testing">BIS Testing</option>
                        <option value="approved-for-live">Approved for Live</option>
                        <option value="moved-to-live">Moved to Live</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
                <div class="report-preview">
                    <div class="report-preview-header">
                        <span class="report-preview-icon">üìä</span>
                        <span>Report Preview</span>
                    </div>
                    <div class="report-preview-info">
                        <p>Date Range: <span id="reportDateRange">-</span></p>
                        <p>Tickets Found: <span id="reportTicketCount">0</span></p>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelReport">Cancel</button>
                    <button type="button" class="btn-primary" id="generateReport">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                        </svg>
                        Download Excel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Excel Modal -->
    <div class="modal-overlay" id="importModal">
        <div class="modal import-modal">
            <div class="modal-header">
                <h2>Import Tickets from Excel</h2>
                <button class="close-btn" id="closeImportModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="import-info">
                <div class="import-info-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                </div>
                <div class="import-info-text">
                    <p><strong>Required columns:</strong></p>
                    <ul>
                        <li><code>Ticket ID</code> - Unique ticket identifier</li>
                        <li><code>Ticket Name</code> or <code>Summary</code> - Ticket description</li>
                        <li><code>Tester Name</code> or <code>Tester</code> - Assigned tester</li>
                        <li><code>Estimated Hours</code> - Hours estimate</li>
                    </ul>
                    <p><strong>Optional columns:</strong></p>
                    <ul>
                        <li><code>Status</code> - Ticket status (defaults to "Nil")</li>
                        <li><code>Priority</code> - low/medium/high/critical (defaults to "medium")</li>
                        <li><code>Actual Hours</code> - Hours worked (defaults to 0)</li>
                    </ul>
                    <p class="import-note">‚ö†Ô∏è Duplicate Ticket IDs will be skipped</p>
                    <button type="button" class="download-template-btn" id="downloadTemplateBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                        </svg>
                        Download Template
                    </button>
                </div>
            </div>
            <div class="file-upload-area" id="fileUploadArea">
                <input type="file" id="importFileInput" accept=".xlsx,.xls,.csv" hidden>
                <div class="file-upload-content">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    <p>Click to select or drag & drop Excel file</p>
                    <span class="file-types">.xlsx, .xls, .csv</span>
                </div>
                <div class="file-selected" id="fileSelectedInfo" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                        <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                    </svg>
                    <span class="file-name" id="selectedFileName"></span>
                    <button class="remove-file-btn" id="removeFileBtn" title="Remove file">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="import-preview" id="importPreview" style="display: none;">
                <div class="import-preview-header">
                    <span class="import-preview-icon">üìã</span>
                    <span>Preview</span>
                </div>
                <div class="import-preview-stats">
                    <div class="preview-stat">
                        <span class="stat-label">Total rows:</span>
                        <span class="stat-value" id="previewTotalRows">0</span>
                    </div>
                    <div class="preview-stat">
                        <span class="stat-label">New tickets:</span>
                        <span class="stat-value success" id="previewNewTickets">0</span>
                    </div>
                    <div class="preview-stat">
                        <span class="stat-label">Duplicates (skipped):</span>
                        <span class="stat-value warning" id="previewDuplicates">0</span>
                    </div>
                    <div class="preview-stat">
                        <span class="stat-label">Invalid rows:</span>
                        <span class="stat-value error" id="previewInvalid">0</span>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelImport">Cancel</button>
                <button type="button" class="btn-primary" id="confirmImport" disabled>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    Import Tickets
                </button>
            </div>
        </div>
    </div>

    <!-- Over Capacity Warning Modal -->
    <div class="modal-overlay" id="overCapacityModal">
        <div class="modal over-capacity-modal">
            <div class="over-capacity-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
            </div>
            <h3>Tester Over Capacity</h3>
            <p><span id="overCapacityTester">Tester</span> will exceed their available hours.</p>
            <div class="over-capacity-details">
                <div class="capacity-detail-row">
                    <span class="capacity-detail-label">Total Available Hours:</span>
                    <span class="capacity-detail-value"><span id="overCapacityTotal">0</span>h</span>
                </div>
                <div class="capacity-detail-row">
                    <span class="capacity-detail-label">Planned Hours (after save):</span>
                    <span class="capacity-detail-value over"><span id="overCapacityPlanned">0</span>h</span>
                </div>
                <div class="capacity-detail-row highlight">
                    <span class="capacity-detail-label">Over by:</span>
                    <span class="capacity-detail-value over"><span id="overCapacityOver">0</span>h</span>
                </div>
            </div>
            <p class="over-capacity-prompt">Do you still want to save this ticket?</p>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelOverCapacity">Don't Save</button>
                <button type="button" class="btn-primary btn-warning" id="confirmOverCapacity">Save Anyway</button>
            </div>
        </div>
    </div>

    <!-- Daily Plan Modal -->
    <div class="modal-overlay" id="dailyPlanModal">
        <div class="modal daily-plan-modal">
            <div class="modal-header">
                <h3>Daily Planning</h3>
                <button class="modal-close" id="closeDailyPlanModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="daily-plan-content">
                <!-- Ticket Info Header -->
                <div class="daily-plan-ticket-info">
                    <div class="ticket-info-row">
                        <span class="ticket-info-id" id="dailyPlanTicketId">TICK-1234</span>
                        <span class="ticket-info-status" id="dailyPlanTicketStatus">In Progress</span>
                    </div>
                    <div class="ticket-info-name" id="dailyPlanTicketName">Ticket Name Here</div>
                    <div class="ticket-info-meta">
                        <span class="ticket-info-tester">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                            <span id="dailyPlanTicketTester">Tester Name</span>
                        </span>
                        <span class="ticket-info-hours">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                            <span id="dailyPlanTicketHours">0h / 8h</span>
                        </span>
                    </div>
                </div>

                <!-- Day Selector Tabs -->
                <div class="daily-plan-tabs">
                    <button class="daily-tab active" data-day="yesterday">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Yesterday's Actual
                    </button>
                    <button class="daily-tab" data-day="today">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        Today's Plan
                    </button>
                </div>

                <!-- Yesterday's Actual Panel -->
                <div class="daily-plan-panel active" id="yesterdayPanel">
                    <div class="panel-header">
                        <span class="panel-date" id="yesterdayDate">Monday, Dec 8</span>
                        <span class="panel-badge actual">Actual Work Done</span>
                    </div>
                    <div class="form-group">
                        <label for="yesterdayHours">Hours Worked</label>
                        <div class="hours-input-group">
                            <input type="number" id="yesterdayHours" min="0" max="24" step="0.5" placeholder="0" value="0">
                            <span class="hours-suffix">hours</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="yesterdayNotes">Work Summary</label>
                        <textarea id="yesterdayNotes" rows="3" placeholder="What did you accomplish yesterday? Any blockers or issues?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="yesterdayStatus">Status at End of Day</label>
                        <select id="yesterdayStatus">
                            <option value="nil">Nil</option>
                            <option value="in-progress">In Progress</option>
                            <option value="start-code-review">Start Code Review</option>
                            <option value="qc-testing">QC Testing</option>
                            <option value="qc-testing-in-progress">QC Testing In Progress</option>
                            <option value="qc-testing-hold">QC Testing Hold</option>
                            <option value="qc-review-fail">QC Review Fail</option>
                            <option value="code-review-failed">Code Review Failed</option>
                            <option value="testing-in-progress">Testing In Progress</option>
                            <option value="tested-awaiting-fixes">Tested - Awaiting Fixes</option>
                            <option value="hold-pending">Hold/Pending</option>
                            <option value="bis-testing">BIS Testing</option>
                            <option value="approved-for-live">Approved for Live</option>
                            <option value="moved-to-live">Moved to Live</option>
                            <option value="closed">Closed</option>
                        </select>
                    </div>
                </div>

                <!-- Today's Plan Panel -->
                <div class="daily-plan-panel" id="todayPanel">
                    <div class="panel-header">
                        <span class="panel-date" id="todayDate">Tuesday, Dec 9</span>
                        <span class="panel-badge plan">Today's Plan</span>
                    </div>
                    <div class="form-group">
                        <label for="todayPlannedHours">Planned Hours</label>
                        <div class="hours-input-group">
                            <input type="number" id="todayPlannedHours" min="0" max="24" step="0.5" placeholder="0" value="0">
                            <span class="hours-suffix">hours</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="todayTasks">Planned Tasks</label>
                        <textarea id="todayTasks" rows="3" placeholder="What do you plan to work on today? List specific tasks..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="todayGoal">Goal for Today</label>
                        <select id="todayGoal">
                            <option value="continue">Continue Testing</option>
                            <option value="complete">Complete Testing</option>
                            <option value="review">Review & Document</option>
                            <option value="fix-retest">Fix Verification & Retest</option>
                            <option value="handoff">Handoff / Transfer</option>
                            <option value="blocked">Blocked - Need Help</option>
                        </select>
                    </div>
                </div>

                <!-- Daily Log History -->
                <div class="daily-log-section">
                    <div class="daily-log-header" id="toggleDailyLog">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                            <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                        </svg>
                        <span>Daily Log History</span>
                        <svg class="log-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div class="daily-log-content collapsed" id="dailyLogContent">
                        <!-- Log entries will be populated dynamically -->
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelDailyPlan">Cancel</button>
                <button type="button" class="btn-primary" id="saveDailyPlan">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                        <path d="M17 21v-8H7v8M7 3v5h8"/>
                    </svg>
                    Save Daily Plan
                </button>
            </div>
        </div>
    </div>

    <!-- Reestimate Modal -->
    <div class="modal-overlay" id="reestimateModal">
        <div class="modal reestimate-modal">
            <div class="reestimate-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
            </div>
            <h3>Actual Hours Exceed Estimate</h3>
            <p>Actual hours (<span id="reestimateActual">0</span>h) exceed estimated hours (<span id="reestimateEstimated">0</span>h).</p>
            <p class="reestimate-prompt">Please update the estimated hours to match or exceed actual hours, or provide a reason for the reestimation.</p>
            <div class="form-group">
                <label for="newEstimatedHours">New Estimated Hours</label>
                <input type="number" id="newEstimatedHours" min="0.5" step="0.5" placeholder="0">
            </div>
            <div class="form-group">
                <label for="reestimationReason">Reason for Reestimation</label>
                <textarea id="reestimationReason" rows="3" placeholder="e.g., Additional scope discovered, complexity underestimated..."></textarea>
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelReestimate">Cancel</button>
                <button type="button" class="btn-primary" id="confirmReestimate">Update & Save</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

